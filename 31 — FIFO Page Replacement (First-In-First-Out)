/* fifo_paging.c
   Simulate FIFO page replacement.
   Compile: gcc fifo_paging.c -o fifo_paging
   Usage example: ./fifo_paging
*/
#include <stdio.h>
#include <stdlib.h>

int main() {
    int frames, n;
    int ref[1000];
    printf("Number of frames: "); scanf("%d",&frames);
    printf("Number of references: "); scanf("%d",&n);
    printf("Enter reference string (space separated):\n");
    for(int i=0;i<n;i++) scanf("%d",&ref[i]);

    int frameArr[frames];
    for(int i=0;i<frames;i++) frameArr[i] = -1;
    int next = 0, faults = 0;

    for(int i=0;i<n;i++){
        int page = ref[i];
        int found = 0;
        for(int j=0;j<frames;j++) if(frameArr[j] == page){ found = 1; break; }
        if(!found){
            frameArr[next] = page;
            next = (next + 1) % frames;
            faults++;
        }
        printf("Ref %d -> Frames: ", page);
        for(int j=0;j<frames;j++) printf("%2d ", frameArr[j]);
        printf("\n");
    }
    printf("Total page faults = %d\n", faults);
    return 0;
}
